<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ChurchReport · Emerge in Christ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=DM+Sans:ital,wght@0,300;0,400;0,500;0,600;1,400&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/docx/7.8.2/docx.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
  </head>
  <body>
    <!-- LOGIN -->
    <div id="login-screen">
      <div class="login-wrap">
        <div class="login-logo">
          <div class="login-icon" id="login-icon"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 5.41L18.59 4 7 15.59V9H5v10h10v-2H8.41z"/></svg></div>
          <h1>Emerge in Christ</h1>
          <p>Système de Gestion des Rapports</p>
        </div>
        <div class="login-card">
          <div class="login-tabs">
            <button class="login-tab active" onclick="switchTab('extension')"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="2" width="16" height="20" rx="2" ry="2"/><path d="M9 22v-4h6v4"/><path d="M8 6h.01"/><path d="M16 6h.01"/><path d="M12 6h.01"/><path d="M12 10h.01"/><path d="M12 14h.01"/><path d="M16 10h.01"/><path d="M16 14h.01"/><path d="M8 10h.01"/><path d="M8 14h.01"/></svg> Extension</button>
            <button class="login-tab" onclick="switchTab('admin')"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg> Administrateur</button>
          </div>
          <div id="login-error" class="login-error"></div>
          <div class="login-panel active" id="panel-extension">
            <div class="form-row">
              <label>Extension</label>
              <select id="ext-select"></select>
            </div>
            <div class="form-row">
              <label>Mot de passe</label>
              <input
                type="password"
                id="ext-pw"
                placeholder="••••••••"
                onkeydown="if(event.key==='Enter')doLogin('extension')"
              />
            </div>
            <button class="btn btn-primary w-full mt-12" onclick="doLogin('extension')">
              Se connecter
            </button>
          </div>
          <div class="login-panel" id="panel-admin">
            <div class="form-row">
              <label>Mot de passe administrateur</label>
              <input
                type="password"
                id="admin-pw"
                placeholder="••••••••"
                onkeydown="if(event.key==='Enter')doLogin('admin')"
              />
            </div>
            <button class="btn btn-primary w-full mt-12" onclick="doLogin('admin')">
              Connexion Admin
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- APP -->
    <div id="app" style="display: none">
      <aside id="sidebar">
        <div class="sidebar-logo">
          <div id="sb-logo-wrap">
            <div class="logo-placeholder"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 5.41L18.59 4 7 15.59V9H5v10h10v-2H8.41z"/></svg></div>
          </div>
          <div class="logo-text">
            <span id="sb-community">Emerge in Christ</span>
            <span>v3.0 · Multi-Extensions</span>
          </div>
        </div>
        <div class="sidebar-badge">
          <div class="ext-name" id="sb-ext-name">—</div>
          <div class="ext-role" id="sb-ext-role">—</div>
        </div>
        <nav class="sidebar-nav" id="sidebar-nav"></nav>
        <div class="sidebar-footer">
          <button class="btn-logout" onclick="doLogout()">⎋ Déconnexion</button>
        </div>
      </aside>
      <main id="main">
        <div id="topbar">
          <button class="menu-btn" onclick="toggleSidebar()">☰</button>
          <div>
            <div class="topbar-title" id="tb-title">—</div>
            <div class="topbar-sub" id="tb-sub">—</div>
          </div>
          <div class="topbar-right">
            <span class="topbar-badge" id="tb-badge">—</span>
          </div>
        </div>
        <div id="content">
          <div id="page"></div>
        </div>
      </main>
    </div>

    <div id="modal-root"></div>
    <div id="toast-wrap"></div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
